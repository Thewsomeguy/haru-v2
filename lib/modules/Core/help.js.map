{"version":3,"sources":["modules/Core/help.js"],"names":[],"mappings":"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","file":"modules/Core/help.js","sourcesContent":["import rq from 'require-all'\nimport path from 'path'\n\nimport BaseCommand from '../../base/BaseCommand'\n\nclass Help extends BaseCommand {\n  static get name () {\n    return 'help'\n  }\n\n  static get description () {\n    return 'Shows the list of commands'\n  }\n\n  static get usage () {\n    return [\n      '```',\n      [\n        'help - Shows the list of commands',\n        'help <command> - Displays the usage manual of the command'\n      ],\n      '```'\n    ]\n  }\n\n  getModules () {\n    let modules = rq(path.join(process.cwd(), 'lib/modules'))\n    return modules\n  }\n\n  handle () {\n    this.responds(/^help$/i, () => {\n      let reply = []\n      let modules = this.getModules()\n      for (let name in modules) {\n        if (modules.hasOwnProperty(name)) {\n          let module = modules[name]\n          if (module.length === 0) continue\n          let mod = []\n          mod.push(`${name}:`)\n          for (let cmdName in module) {\n            if (module.hasOwnProperty(cmdName)) {\n              let command = module[cmdName]\n              if (command.hidden === true) continue\n              mod.push(`  ${this.prefix}${command.name} - ${command.description}`)\n            }\n          }\n          if (mod.length > 1) reply.push(mod.join('\\n'))\n        }\n      }\n      this.send(this.sender, '```\\n' + reply.join('\\n') + '\\n```')\n      if (!this.isPM) {\n        this.reply(':envelope_with_arrow: **Check your PMs!**')\n      }\n    })\n\n    this.responds(/^help (\\S+)$/i, matches => {\n      let reply = [`**${matches[1]}** does not exist in the usage manual`]\n      let modules = this.getModules()\n      for (let name in modules) {\n        if (modules.hasOwnProperty(name)) {\n          let module = modules[name]\n          for (let cmdName in module) {\n            if (module.hasOwnProperty(cmdName)) {\n              let command = module[cmdName]\n              if ((command.adminOnly === true || command.hidden === true) &&\n              this.isAdmin === false) continue\n              if (command.name === matches[1]) {\n                if (Array.isArray(command.usage) && command.usage.length > 0) {\n                  reply = []\n                  command.usage.forEach(elem => {\n                    if (Array.isArray(elem)) {\n                      elem.forEach(e => {\n                        reply.push(`${this.prefix}${e}`)\n                      })\n                    } else {\n                      reply.push(elem)\n                    }\n                  })\n                } else if (typeof command.usage === 'string') {\n                  reply = [`${this.prefix}${command.usage}`]\n                }\n                if (command.aliases.length > 0) {\n                  reply.push(`Aliases: \\`${command.aliases.join(', ')}\\``)\n                }\n              }\n            }\n          }\n        }\n      }\n      this.send(this.sender, reply.join('\\n'))\n      if (!this.isPM) {\n        this.reply(':envelope_with_arrow: **Check your PMs!**')\n      }\n    })\n  }\n}\n\nmodule.exports = Help\n"],"sourceRoot":"/Users/AaronTua/Desktop/code/fuyu/src"}